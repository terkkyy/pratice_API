<!DOCTYPE html>
<html lang="en">
  
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible"content="IE=edge">
    <meta name="viewport"content="width=device-width,initial-scale=1.0">
    <title>JavaScript API Call</title>
    
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

</head>
<body>
      <script>  
        
        // // XML HttpRequest
        // let request = new XMLHttpRequest();
        // request.open('GET','https://jsonplaceholder.typicode.com/users');
        // request.send();
        // request.onload = () => {
        //     // console.log(request);
        //     if(request.status = 200){
        //       console.log(JSON.parse(request.response))
        //     } else {
        //       console.log(`error ${request.status} $
        //       {request.statusText}`);
        //     }
        // }

        
        // //jQuery & Ajax
        // $(document).ready(function() {
        //   $.ajax({
        //     url: 'https://jsonplaceholder.typicode.com/users',
        //     type: 'GET' ,
        //     success: function(result) {
        //       console.log(result)
        //     },
        //     error: function(error) {
        //       console.log(error)
        //     }
        //   })
        // })

        // //Fetch + Async & Await
        // async function getUser() {
        //   let response = await fetch('https://jsonplaceholder.typicode.com/users');
        //   // console.log(response)
        //   let data = await response.json();
        //   return data;
        // }
        // getUser().then(data => console.log(data));


        // //axios
        // axios.get('https://jsonplaceholder.typicode.com/users').then(res => {
        //   console.log(res.data)
        // }).catch(error => {
        //   console.log(error)
        // })


      </script>

      <ul id="authors">

      </ul>

      <script>

          function createNode(element){
              return document.createElement(element);
          }
          function append(parent,el){
              return parent.appendChild(el);
          }

          const ul = document.getElementById('authors');
          const url = 'https://randomuser.me/api/?results=10';
          
          fetch(url)
          .then((res)=>res.json())
          .then(function(data){
              console.log(data);
              let authors=data.results;
              return authors.map(function(author){
                  let li = createNode('li');
                  let img = createNode('img');
                  let span = createNode('span');
                  
                  img.src = author.picture.medium;
                  span.innerHTML = `${author.name.title } ${author.name.first } ${author.name.last}`;
                  
                  append(li,img);
                  append(li,span);
                  append(ul,li);
              })
          }).catch(function(error){
              console.log(error);
          });

     </script>    
     
     

      
</body>
</html>